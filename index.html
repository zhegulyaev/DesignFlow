<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>DesignFlow ‚Äî –¢—Ä–µ–∫–µ—Ä –ø—Ä–æ–µ–∫—Ç–æ–≤</title>

<link rel="icon" type="image/svg+xml"
      href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Crect width='24' height='24' rx='6' ry='6' fill='%230d1117'/%3E%3Cpath d='M11 2 L5 14 H10 L9 22 L19 8 H13 L14 2 Z' fill='%23facc15'/%3E%3C/svg%3E">

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ru.js"></script>
<script src="https://unpkg.com/feather-icons"></script>

<style>
  /* MINIMALISTIC DESIGN COLORS */
  :root{
    /* Core Colors - Softer Dark Theme */
    --bg:#0f121a;
    --card:#1a202c;
    --card-alt:#0d1117;
    --text:#c9d1d9;
    --muted:#8b949e;
    --link:#58a6ff;
    --link-hover:#6fc1ff;
    --border:#30363d;
    --green: #3ecf8e;
    --yellow: #facc15;
    --red: #f87171;
    --blue: #60a5fa;
    --paid-bg: #1f3531;
    --paid-text: #4ade80;
    --red-bg: rgba(248, 113, 113, 0.1);
    --green-bg: rgba(62, 207, 142, 0.1);
    --yellow-bg: rgba(250, 204, 55, 0.1);
    --blue-bg: rgba(96, 165, 250, 0.1);
    --critical-pace: #ef4444;
  }
  .light{
    --bg: #f8f9fa;
    --card: #ffffff;
    --card-alt: #f0f2f5;
    --text: #1d2024;
    --muted: #6c757d;
    --link: #007bff;
    --link-hover: #0056b3;
    --border: #dee2e6;
    --green: #28a745;
    --yellow: #ffc107;
    --red: #dc3545;
    --blue: #007bff;
    --paid-bg: #e6ffed;
    --paid-text: #28a745;
    --red-bg: rgba(220, 53, 69, 0.1);
    --green-bg: rgba(40, 167, 69, 0.1);
    --yellow-bg: rgba(255, 193, 7, 0.1);
    --blue-bg: rgba(0, 123, 255, 0.1);
    --critical-pace: #dc3545;
  }
  
  /* RESET */
  *, *::before, *::after { box-sizing: border-box; }
  body { 
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    margin: 0; 
    padding: 0; 
    background-color: var(--bg); 
    color: var(--text); 
    transition: background-color 0.3s, color 0.3s;
    line-height: 1.6;
  }
  a { color: var(--link); text-decoration: none; }
  a:hover { color: var(--link-hover); text-decoration: underline; }
  button { 
    background: none; 
    border: none; 
    color: var(--muted); 
    cursor: pointer; 
    padding: 6px; 
    border-radius: 6px; 
    transition: background-color 0.2s, color 0.2s;
  }
  button:hover { 
    background-color: var(--card-alt); 
    color: var(--text);
  }
  input[type="text"], input[type="number"], textarea, select {
    background-color: var(--card-alt);
    border: 1px solid var(--border);
    color: var(--text);
    padding: 8px;
    border-radius: 6px;
    font-size: 14px;
    transition: border-color 0.2s, box-shadow 0.2s;
  }
  input:focus, textarea:focus, select:focus {
    border-color: var(--link);
    outline: none;
    box-shadow: 0 0 0 2px rgba(88, 166, 255, 0.3);
  }
  
  /* UTILITY & LAYOUT */
  .container { max-width: 1400px; margin: 0 auto; padding: 20px; }
  .card {
    background-color: var(--card);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 20px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
  }
  .flex { display: flex; align-items: center; }
  .flex-col { display: flex; flex-direction: column; }
  .justify-between { justify-content: space-between; }
  .gap-3 { gap: 12px; }
  .mt-4 { margin-top: 16px; }
  .text-muted { color: var(--muted); font-size: 14px; }
  
  /* HEADER */
  header {
    padding: 10px 0;
    margin-bottom: 20px;
    border-bottom: 1px solid var(--border);
  }
  .logo {
    font-size: 24px;
    font-weight: 800;
    color: var(--text);
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .logo-icon { width: 30px; height: 30px; }
  
  /* TABS */
  .tabs {
    display: flex;
    border-bottom: 1px solid var(--border);
    margin-bottom: 20px;
  }
  .tab-btn {
    padding: 10px 20px;
    color: var(--muted);
    font-weight: 600;
    cursor: pointer;
    border: none;
    background: none;
    border-bottom: 2px solid transparent;
    transition: color 0.2s, border-bottom-color 0.2s;
    font-size: 16px;
    text-align: left;
  }
  .tab-btn:hover { color: var(--text); }
  .tab-btn.active {
    color: var(--link);
    border-bottom-color: var(--link);
  }
  
  /* TABLE STYLES */
  .project-table-wrap {
    overflow-x: auto;
  }
  .project-table {
    width: 100%;
    border-collapse: collapse;
    min-width: 1000px;
  }
  .project-table th, .project-table td {
    padding: 12px 15px;
    text-align: left;
    border-bottom: 1px solid var(--border);
    font-size: 14px;
    vertical-align: middle;
  }
  .project-table th {
    color: var(--muted);
    font-weight: 600;
    cursor: pointer;
    user-select: none;
    position: sticky;
    top: 0;
    background-color: var(--card); /* Sticky header background */
    z-index: 10;
  }
  .project-table th:hover { color: var(--text); }
  .project-table tr:hover:not(.totals-row) {
    background-color: var(--card-alt);
  }
  .row-selected {
    background-color: rgba(88, 166, 255, 0.1);
  }

  /* Specific column widths/styles */
  .t-p, .t-pr, .t-contr { width: 10%; }
  .t-paid, .t-tax { width: 7%; }
  .t-dl { width: 12%; }
  .t-actions { width: 150px; text-align: center; }
  
  /* INPUTS IN TABLE */
  .project-table td input[type="text"], 
  .project-table td select, 
  .project-table td [contenteditable] {
    padding: 4px;
    margin: -4px 0;
    border: 1px solid transparent;
    background-color: transparent;
    border-radius: 4px;
    font-size: 14px;
    color: var(--text);
    width: 100%;
  }
  .project-table td [contenteditable]:focus {
    border-color: var(--border);
    background-color: var(--card-alt);
    outline: none;
  }
  .project-table td input:focus {
    border-color: var(--link);
    box-shadow: 0 0 0 1px var(--link);
  }
  
  /* DATE PICKER */
  .date-input-wrap {
    display: flex;
    align-items: center;
    gap: 6px;
    cursor: pointer;
    padding: 4px 0;
    border-radius: 4px;
  }
  .date-input-wrap:hover {
    background-color: var(--card-alt);
  }
  .date-icon { width: 16px; height: 16px; color: var(--muted); }
  
  /* STATUS BADGES */
  .dl-status {
    padding: 4px 8px;
    border-radius: 6px;
    font-weight: 600;
    font-size: 12px;
  }
  .status-crit { 
    background-color: var(--red-bg); 
    color: var(--red); 
  }
  .status-warn { 
    background-color: var(--yellow-bg); 
    color: var(--yellow); 
  }
  .status-ok { 
    background-color: var(--green-bg); 
    color: var(--green); 
  }
  .status-none { 
    background: none; 
    color: var(--muted); 
    font-weight: normal;
  }

  /* TOTALS ROW */
  .totals-row {
    background-color: var(--card-alt);
    font-weight: 700;
    position: sticky;
    bottom: 0;
    border-top: 2px solid var(--border);
  }
  
  /* TOOLBARS & FOOTER */
  .toolbar {
    padding: 10px 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 10px;
    flex-wrap: wrap;
  }
  .toolbar button {
    background-color: var(--link);
    color: white;
    padding: 8px 15px;
    border-radius: 6px;
    font-weight: 600;
    transition: background-color 0.2s;
  }
  .toolbar button:hover {
    background-color: var(--link-hover);
  }
  .inline-link-btn {
    color: var(--link);
    padding: 0;
    font-weight: normal;
  }
  .inline-link-btn:hover {
    color: var(--link-hover);
    background: none;
    text-decoration: underline;
  }
  
  /* MODAL */
  .modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 1000;
  }
  .modal-content {
    background: var(--card);
    padding: 30px;
    border-radius: 12px;
    width: 90%;
    max-width: 500px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
  }
  .modal-content h2 {
    margin-top: 0;
    color: var(--text);
    border-bottom: 1px solid var(--border);
    padding-bottom: 10px;
    margin-bottom: 20px;
  }
  .form-group { margin-bottom: 15px; }
  .form-group label {
    display: block;
    margin-bottom: 5px;
    font-weight: 600;
    color: var(--text);
  }
  .modal-actions {
    margin-top: 20px;
    display: flex;
    justify-content: flex-end;
    gap: 10px;
  }
  .modal-actions .cancel-btn {
    background: var(--card-alt);
    color: var(--text);
  }
  .modal-actions .cancel-btn:hover {
    background: var(--border);
  }
  
  /* STATS SECTION */
  .stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
  }
  .stat-card {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
  }
  .stat-label {
    color: var(--muted);
    font-weight: 600;
    font-size: 14px;
    margin-bottom: 5px;
  }
  .stat-value {
    font-size: 24px;
    font-weight: 800;
    color: var(--text);
  }
  
  /* CHART STYLES */
  .chart-container {
    padding: 20px;
    background-color: var(--card);
    border-radius: 12px;
    margin-bottom: 20px;
    border: 1px solid var(--border);
  }
  
  /* NEW PACE BLOCK */
  .pace-block {
    display: none; /* Initially hidden, shown by JS */
    padding: 15px 20px;
    border-radius: 10px;
    margin-bottom: 20px;
    background-color: var(--card);
    border: 1px solid var(--border);
    display: flex;
    align-items: center;
    justify-content: space-between;
    transition: background-color 0.3s, border-color 0.3s;
  }
  .pace-block.critical {
    background-color: var(--red-bg);
    border-color: var(--red);
    box-shadow: 0 0 10px rgba(248, 113, 113, 0.2);
  }
  .pace-info {
    display: flex;
    align-items: center;
    gap: 15px;
  }
  .pace-icon {
    font-size: 30px;
  }
  .pace-status { 
    font-weight: 700; 
    font-size: 14px; 
    padding: 6px 14px; 
    border-radius: 8px; 
    border: 1px solid transparent;
  }
  .pace-actions {
    display: flex;
    align-items: center;
    gap: 15px;
  }
  /* STATUS CHIP STYLES */
  .pace-chill { background: rgba(62, 207, 142, 0.1); color: var(--green); border-color: rgba(62, 207, 142, 0.2); }
  .pace-hurry { background: var(--red); color: white; border-color: var(--red); }

  /* REPUTATION CHIP */
  .pace-rep-chip {
    display: flex;
    align-items: center;
    padding: 6px 10px;
    border-radius: 8px;
    background-color: var(--card-alt);
    gap: 8px;
    font-size: 14px;
  }
  .rep-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
  }
  .rep-dot.good { background-color: var(--green); }
  .rep-dot.ok { background-color: var(--yellow); }
  .rep-dot.bad { background-color: var(--red); }
  .rep-chip-label {
    color: var(--muted);
    font-size: 12px;
  }
  .rep-chip-score {
    font-weight: 700;
    color: var(--text);
  }
  
  /* MONTH SELECT */
  #month-select {
    padding: 6px 10px;
    font-size: 14px;
    border-radius: 6px;
  }
  
  /* THEME SWITCH */
  .theme-switch {
    display: flex;
    align-items: center;
    gap: 8px;
    color: var(--muted);
    cursor: pointer;
  }
  .theme-switch:hover {
    color: var(--text);
  }
  .theme-switch svg {
    width: 20px;
    height: 20px;
  }
  
  /* CHECKBOX STYLES */
  input[type="checkbox"] {
    appearance: none;
    -webkit-appearance: none;
    width: 16px;
    height: 16px;
    border: 1px solid var(--muted);
    border-radius: 4px;
    cursor: pointer;
    position: relative;
    margin-right: 0;
    vertical-align: middle;
    background-color: var(--card-alt);
    transition: background-color 0.2s, border-color 0.2s;
  }
  input[type="checkbox"]:checked {
    background-color: var(--link);
    border-color: var(--link);
  }
  input[type="checkbox"]:checked::after {
    content: '';
    position: absolute;
    top: 2px;
    left: 5px;
    width: 4px;
    height: 8px;
    border: solid white;
    border-width: 0 2px 2px 0;
    transform: rotate(45deg);
  }
  .bulk-checkbox { margin-right: 5px; }

  /* FOOTER SELECT ROW */
  .footer-select-row {
      background-color: var(--card-alt);
      padding: 10px 20px;
      border-top: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: sticky;
      bottom: 0;
      z-index: 20;
  }
  .footer-select-actions button {
      background-color: var(--link);
      color: white;
      padding: 6px 12px;
      border-radius: 6px;
  }
  .footer-select-actions button.secondary {
      background: var(--card);
      border: 1px solid var(--border);
      color: var(--text);
  }
  .footer-select-actions button.secondary:hover {
      background: var(--border);
  }
  
  /* CLIENT COLORS */
  .client-wrap {
      display: flex;
      align-items: center;
      gap: 5px;
  }
  .client-wrap span {
      position: relative;
      padding-left: 10px;
  }
  .client-wrap span::before {
      content: '';
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      width: 6px;
      height: 6px;
      border-radius: 50%;
  }
  .client-wrap span.client-color-1::before { background-color: #ff9f1c; } /* Orange */
  .client-wrap span.client-color-2::before { background-color: #2ec4b6; } /* Cyan */
  .client-wrap span.client-color-3::before { background-color: #e76f51; } /* Coral */
  .client-wrap span.client-color-4::before { background-color: #264653; } /* Dark Blue-Green */
  .client-wrap span.client-color-5::before { background-color: #f77f00; } /* Dark Orange */
  .client-wrap span.client-color-6::before { background-color: #48bfe3; } /* Light Blue */
  .client-wrap span.client-color-7::before { background-color: #c084fc; } /* Purple */

  /* LINKS ICON */
  .link-icon {
      width: 14px;
      height: 14px;
      color: var(--link);
      cursor: pointer;
  }
  .project-name-wrap {
      display: flex;
      align-items: center;
      gap: 5px;
  }
  .project-name {
      font-weight: 600;
  }
  
  /* EXPENSE CELL */
  .expense-cell {
      display: flex;
      flex-direction: column;
      gap: 4px;
  }
  .expense-helper {
      font-size: 10px;
      color: var(--muted);
  }

  /* NET DISPLAY */
  .net-display-wrap {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
  }
  .net-main-val {
      font-weight: 600;
      color: var(--green);
  }
  .net-prc-val {
      font-size: 10px;
      color: var(--muted);
  }

  /* DATE REMAINING STYLES */
  .time-text {
      font-size: 10px;
      margin-left: 4px;
      color: var(--muted);
  }
  .time-text.red {
      color: var(--red);
      font-weight: 600;
  }
  .time-text.yellow {
      color: var(--yellow);
      font-weight: 600;
  }
  .time-text.green {
      color: var(--green);
      font-weight: 600;
  }
  
  /* MOBILE OPTIMIZATION */
  @media (max-width: 768px) {
    .container { padding: 10px; }
    .tabs { overflow-x: auto; }
    .tab-btn { flex-shrink: 0; }
    .stats-grid { grid-template-columns: repeat(2, 1fr); }
    .pace-block { flex-direction: column; align-items: stretch; }
    .pace-actions { margin-top: 10px; justify-content: space-between; }
  }

</style>
</head>
<body>

<svg style="display:none;">
    <symbol id="icon-light" viewBox="0 0 24 24"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></symbol>
    <symbol id="icon-dark" viewBox="0 0 24 24"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></symbol>
    <symbol id="icon-calendar" viewBox="0 0 24 24"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></symbol>
    <symbol id="icon-duplicate" viewBox="0 0 24 24"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect></symbol>
    <symbol id="icon-plus" viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></symbol>
</svg>

<div class="container">
    
    <header class="flex justify-between">
        <div class="logo">
            <svg class="logo-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect width="24" height="24" rx="6" ry="6" fill="#0d1117"/>
                <path d="M11 2 L5 14 H10 L9 22 L19 8 H13 L14 2 Z" fill="#facc15"/>
            </svg>
            DesignFlow
        </div>
        <div class="flex gap-3">
            <div id="theme-switch" class="theme-switch" onclick="toggleTheme()">
                <svg id="theme-icon"><use href="#icon-dark"></use></svg>
                <span id="theme-label">–¢–µ–º–Ω–∞—è —Ç–µ–º–∞</span>
            </div>
        </div>
    </header>

    <div id="pace-block" class="pace-block">
        <div class="pace-info">
            <span class="pace-icon" id="pace-emoji">üî•</span>
            <div>
                <div style="font-size:20px; font-weight:800; color:var(--text);" id="pace-headline">–û—Ç–ª–∏—á–Ω–æ! –ò–¥–µ–º –ø–æ –ø–ª–∞–Ω—É.</div>
                <div style="color:var(--muted); font-size:14px; margin-top:4px;" id="pace-hint">–ü—Ä–æ–µ–∫—Ç—ã —Å–¥–∞—é—Ç—Å—è –≤–æ–≤—Ä–µ–º—è, —Ä–µ–π—Ç–∏–Ω–≥ —Ä–∞—Å—Ç–µ—Ç. –ü—Ä–æ–¥–æ–ª–∂–∞–π –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ.</div>
            </div>
        </div>
        <div class="pace-actions">
            <div class="pace-status" id="pace-status">–ö—Ä–∏—Ç–∏—á–Ω–æ</div>
            <div class="pace-rep-chip good" id="pace-rep-chip">
                <span class="rep-dot good" id="pace-rep-dot"></span>
                <div class="rep-chip-text">
                    <div class="rep-chip-label">–†–µ–ø—É—Ç–∞—Ü–∏—è</div>
                    <div class="rep-chip-score" id="pace-rep-text">100 / 100</div>
                </div>
            </div>
            <button class="inline-link-btn" onclick="scrollToReputation()">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
        </div>
    </div>
    <div class="card">
        <div class="tabs">
            <button class="tab-btn active" onclick="switchView('active')" id="btn-active">–í —Ä–∞–±–æ—Ç–µ (<span id="active-count">0</span>)</button>
            <button class="tab-btn" onclick="switchView('waiting')" id="btn-waiting">–û–∂–∏–¥–∞–Ω–∏–µ (<span id="waiting-count">0</span>)</button>
            <button class="tab-btn" onclick="switchView('paused')" id="btn-paused">–ù–∞ –ø–∞—É–∑–µ (<span id="paused-count">0</span>)</button>
            <button class="tab-btn" onclick="switchView('potential')" id="btn-potential">–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª (<span id="potential-count">0</span>)</button>
            <button class="tab-btn" onclick="switchView('archive')" id="btn-archive">–í—ã–ø–æ–ª–Ω–µ–Ω–æ (<span id="archive-count">0</span>)</button>
            <button class="tab-btn" onclick="switchView('trash')" id="btn-trash">–ö–æ—Ä–∑–∏–Ω–∞ (<span id="trash-count">0</span>)</button>
        </div>

        <div class="toolbar">
            <div class="flex gap-3">
                <button onclick="openAddProjectModal()">
                    <svg style="width:16px; height:16px; margin-right:5px; vertical-align:middle;"><use href="#icon-plus"></use></svg>
                    –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç
                </button>
            </div>
            <div class="flex gap-3">
                <select id="month-select" onchange="upd()"></select>
                <button class="inline-link-btn" onclick="exp()">–≠–∫—Å–ø–æ—Ä—Ç JSON</button>
                <button class="inline-link-btn" onclick="expCSV()">–≠–∫—Å–ø–æ—Ä—Ç CSV</button>
            </div>
        </div>

        <div id="view-active" class="project-table-wrap">
            <table class="project-table" id="t-active">
                <thead>
                    <tr class="sort-row">
                        <th class="select-col"></th>
                        <th onclick="sortData('c')">–ö–ª–∏–µ–Ω—Ç</th>
                        <th onclick="sortData('n')">–ü—Ä–æ–µ–∫—Ç</th>
                        <th onclick="sortData('start')" class="date-cell">–°—Ç–∞—Ä—Ç</th>
                        <th onclick="sortData('dl')" class="date-cell">–î–µ–¥–ª–∞–π–Ω</th>
                        <th onclick="sortData('p')" class="t-p">–°—É–º–º–∞</th>
                        <th onclick="sortData('pr')" class="t-pr">–ß–∏—Å—Ç—ã–º–∏</th>
                        <th onclick="sortData('paid')" class="t-paid">–û–ø–ª–∞—á–µ–Ω–æ</th>
                        <th onclick="sortData('taxPrc')" class="t-tax">–ù–∞–ª–æ–≥</th>
                        <th onclick="sortData('contractor')" class="t-contr">–†–∞—Å—Ö–æ–¥—ã</th>
                        <th class="t-actions">–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                </thead>
                <tbody>
                    </tbody>
                <tfoot>
                    <tr class="totals-row">
                        <td colspan="5" style="text-align: right;">–ò—Ç–æ–≥–æ:</td>
                        <td class="t-p" id="active-p">0 ‚ÇΩ</td>
                        <td class="t-pr" id="active-pr">0 ‚ÇΩ</td>
                        <td class="t-paid"></td>
                        <td class="t-tax" id="active-tax">0 ‚ÇΩ</td>
                        <td class="t-contr" id="active-contr">0 ‚ÇΩ</td>
                        <td class="t-actions"></td>
                    </tr>
                </tfoot>
            </table>
        </div>
        
        <div id="view-waiting" class="project-table-wrap" style="display:none;">
            <table class="project-table" id="t-waiting">
                <thead>
                    <tr class="sort-row">
                        <th class="select-col"></th>
                        <th onclick="sortData('c')">–ö–ª–∏–µ–Ω—Ç</th>
                        <th onclick="sortData('n')">–ü—Ä–æ–µ–∫—Ç</th>
                        <th onclick="sortData('start')" class="date-cell">–°—Ç–∞—Ä—Ç</th>
                        <th onclick="sortData('dl')" class="date-cell">–û–∂–∏–¥–∞–Ω–∏–µ –¥–æ</th>
                        <th onclick="sortData('p')" class="t-p">–°—É–º–º–∞</th>
                        <th onclick="sortData('pr')" class="t-pr">–ß–∏—Å—Ç—ã–º–∏</th>
                        <th onclick="sortData('paid')" class="t-paid">–û–ø–ª–∞—á–µ–Ω–æ</th>
                        <th onclick="sortData('taxPrc')" class="t-tax">–ù–∞–ª–æ–≥</th>
                        <th onclick="sortData('contractor')" class="t-contr">–†–∞—Å—Ö–æ–¥—ã</th>
                        <th class="t-actions">–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                </thead>
                <tbody></tbody>
                <tfoot>
                    <tr class="totals-row">
                        <td colspan="5" style="text-align: right;">–ò—Ç–æ–≥–æ:</td>
                        <td class="t-p" id="waiting-p">0 ‚ÇΩ</td>
                        <td class="t-pr" id="waiting-pr">0 ‚ÇΩ</td>
                        <td class="t-paid"></td>
                        <td class="t-tax" id="waiting-tax">0 ‚ÇΩ</td>
                        <td class="t-contr" id="waiting-contr">0 ‚ÇΩ</td>
                        <td class="t-actions"></td>
                    </tr>
                </tfoot>
            </table>
        </div>

        <div id="view-paused" class="project-table-wrap" style="display:none;">
            <table class="project-table" id="t-paused">
                <thead>
                    <tr class="sort-row">
                        <th class="select-col"></th>
                        <th onclick="sortData('c')">–ö–ª–∏–µ–Ω—Ç</th>
                        <th onclick="sortData('n')">–ü—Ä–æ–µ–∫—Ç</th>
                        <th onclick="sortData('start')" class="date-cell">–°—Ç–∞—Ä—Ç</th>
                        <th onclick="sortData('dl')" class="date-cell">–ù–∞ –ø–∞—É–∑–µ —Å</th>
                        <th onclick="sortData('p')" class="t-p">–°—É–º–º–∞</th>
                        <th onclick="sortData('pr')" class="t-pr">–ß–∏—Å—Ç—ã–º–∏</th>
                        <th onclick="sortData('paid')" class="t-paid">–û–ø–ª–∞—á–µ–Ω–æ</th>
                        <th onclick="sortData('taxPrc')" class="t-tax">–ù–∞–ª–æ–≥</th>
                        <th onclick="sortData('contractor')" class="t-contr">–†–∞—Å—Ö–æ–¥—ã</th>
                        <th class="t-actions">–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                </thead>
                <tbody></tbody>
                <tfoot>
                    <tr class="totals-row">
                        <td colspan="5" style="text-align: right;">–ò—Ç–æ–≥–æ:</td>
                        <td class="t-p" id="paused-p">0 ‚ÇΩ</td>
                        <td class="t-pr" id="paused-pr">0 ‚ÇΩ</td>
                        <td class="t-paid"></td>
                        <td class="t-tax" id="paused-tax">0 ‚ÇΩ</td>
                        <td class="t-contr" id="paused-contr">0 ‚ÇΩ</td>
                        <td class="t-actions"></td>
                    </tr>
                </tfoot>
            </table>
        </div>

        <div id="view-potential" class="project-table-wrap" style="display:none;">
            <table class="project-table" id="t-potential">
                <thead>
                    <tr class="sort-row">
                        <th class="select-col"></th>
                        <th onclick="sortData('c')">–ö–ª–∏–µ–Ω—Ç</th>
                        <th onclick="sortData('n')">–ü—Ä–æ–µ–∫—Ç</th>
                        <th onclick="sortData('start')" class="date-cell">–î–∞—Ç–∞ –∑–∞–ø—Ä–æ—Å–∞</th>
                        <th onclick="sortData('dl')" class="date-cell">–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª –¥–æ</th>
                        <th onclick="sortData('p')" class="t-p">–°—É–º–º–∞</th>
                        <th onclick="sortData('pr')" class="t-pr">–ß–∏—Å—Ç—ã–º–∏</th>
                        <th onclick="sortData('paid')" class="t-paid">–û–ø–ª–∞—á–µ–Ω–æ</th>
                        <th onclick="sortData('taxPrc')" class="t-tax">–ù–∞–ª–æ–≥</th>
                        <th onclick="sortData('contractor')" class="t-contr">–†–∞—Å—Ö–æ–¥—ã</th>
                        <th class="t-actions">–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                </thead>
                <tbody></tbody>
                <tfoot>
                    <tr class="totals-row">
                        <td colspan="5" style="text-align: right;">–ò—Ç–æ–≥–æ:</td>
                        <td class="t-p" id="potential-p">0 ‚ÇΩ</td>
                        <td class="t-pr" id="potential-pr">0 ‚ÇΩ</td>
                        <td class="t-paid"></td>
                        <td class="t-tax" id="potential-tax">0 ‚ÇΩ</td>
                        <td class="t-contr" id="potential-contr">0 ‚ÇΩ</td>
                        <td class="t-actions"></td>
                    </tr>
                </tfoot>
            </table>
        </div>

        <div id="view-archive" class="project-table-wrap" style="display:none;">
            <table class="project-table" id="t-archive">
                <thead>
                    <tr class="sort-row">
                        <th class="select-col"></th>
                        <th onclick="sortData('c')">–ö–ª–∏–µ–Ω—Ç</th>
                        <th onclick="sortData('n')">–ü—Ä–æ–µ–∫—Ç</th>
                        <th onclick="sortData('start')" class="date-cell">–°—Ç–∞—Ä—Ç</th>
                        <th onclick="sortData('date')" class="date-cell">–î–∞—Ç–∞ —Å–¥–∞—á–∏</th>
                        <th onclick="sortData('p')" class="t-p">–°—É–º–º–∞</th>
                        <th onclick="sortData('pr')" class="t-pr">–ß–∏—Å—Ç—ã–º–∏</th>
                        <th onclick="sortData('paid')" class="t-paid">–û–ø–ª–∞—á–µ–Ω–æ</th>
                        <th onclick="sortData('taxPrc')" class="t-tax">–ù–∞–ª–æ–≥</th>
                        <th onclick="sortData('contractor')" class="t-contr">–†–∞—Å—Ö–æ–¥—ã</th>
                        <th class="t-actions">–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                </thead>
                <tbody></tbody>
                <tfoot>
                    <tr class="totals-row">
                        <td colspan="5" style="text-align: right;">–ò—Ç–æ–≥–æ:</td>
                        <td class="t-p" id="archive-p">0 ‚ÇΩ</td>
                        <td class="t-pr" id="archive-pr">0 ‚ÇΩ</td>
                        <td class="t-paid"></td>
                        <td class="t-tax" id="archive-tax">0 ‚ÇΩ</td>
                        <td class="t-contr" id="archive-contr">0 ‚ÇΩ</td>
                        <td class="t-actions"></td>
                    </tr>
                </tfoot>
            </table>
        </div>

        <div id="view-trash" class="project-table-wrap" style="display:none;">
            <table class="project-table" id="t-trash">
                <thead>
                    <tr class="sort-row">
                        <th class="select-col"></th>
                        <th onclick="sortData('c')">–ö–ª–∏–µ–Ω—Ç</th>
                        <th onclick="sortData('n')">–ü—Ä–æ–µ–∫—Ç</th>
                        <th onclick="sortData('p')" class="t-p">–°—É–º–º–∞</th>
                        <th onclick="sortData('pr')" class="t-pr">–ß–∏—Å—Ç—ã–º–∏</th>
                        <th onclick="sortData('taxPrc')" class="t-tax">–ù–∞–ª–æ–≥</th>
                        <th onclick="sortData('contractor')" class="t-contr">–†–∞—Å—Ö–æ–¥—ã</th>
                        <th class="t-actions">–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                </thead>
                <tbody></tbody>
                <tfoot>
                    <tr class="totals-row">
                        <td colspan="3" style="text-align: right;">–ò—Ç–æ–≥–æ:</td>
                        <td class="t-p" id="trash-p">0 ‚ÇΩ</td>
                        <td class="t-pr" id="trash-pr">0 ‚ÇΩ</td>
                        <td class="t-tax" id="trash-tax">0 ‚ÇΩ</td>
                        <td class="t-contr" id="trash-contr">0 ‚ÇΩ</td>
                        <td class="t-actions"></td>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>
    
    <div id="footer-select-bar" class="footer-select-row" style="display:none;">
        <div class="flex gap-3">
            <input type="checkbox" id="footer-select-all" onchange="toggleFooterSelection(this)">
            <label for="footer-select-all" id="footer-select-count" class="text-muted">–í—ã–±—Ä–∞–Ω–æ 0</label>
        </div>
        <div class="footer-select-actions flex gap-3">
            <button onclick="mv('archive')" title="–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤ –∞—Ä—Ö–∏–≤"><i data-feather="archive"></i> –í –∞—Ä—Ö–∏–≤</button>
            <button onclick="mv('waiting')" title="–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤ –æ–∂–∏–¥–∞–Ω–∏–µ"><i data-feather="clock"></i> –û–∂–∏–¥–∞–Ω–∏–µ</button>
            <button onclick="mv('paused')" title="–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –Ω–∞ –ø–∞—É–∑—É"><i data-feather="pause"></i> –ü–∞—É–∑–∞</button>
            <button onclick="askDel()" title="–£–¥–∞–ª–∏—Ç—å –Ω–∞–≤—Å–µ–≥–¥–∞" class="secondary"><i data-feather="trash-2"></i> –£–¥–∞–ª–∏—Ç—å</button>
        </div>
    </div>

    <div class="card" id="reputation-section">
        <h2>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ —Ä–µ–ø—É—Ç–∞—Ü–∏—è</h2>
        <div class="stats-grid">
            <div class="stat-card">
                <span class="stat-label">–¢–µ–∫—É—â–∞—è —Ä–µ–ø—É—Ç–∞—Ü–∏—è</span>
                <span class="stat-value" id="current-rep">100 / 100</span>
            </div>
            <div class="stat-card">
                <span class="stat-label">–ü—Ä–æ–µ–∫—Ç–æ–≤ –≤ –º–µ—Å—è—Ü</span>
                <span class="stat-value" id="monthly-count">0</span>
            </div>
            <div class="stat-card">
                <span class="stat-label">–§–∞–∫—Ç (—á–∏—Å—Ç—ã–º–∏)</span>
                <span class="stat-value" id="total-fact">0 ‚ÇΩ</span>
            </div>
            <div class="stat-card">
                <span class="stat-label">–ü–ª–∞–Ω (—á–∏—Å—Ç—ã–º–∏)</span>
                <span class="stat-value" id="total-plan">0 ‚ÇΩ</span>
            </div>
            <div class="stat-card">
                <span class="stat-label">–°–≤–æ–±–æ–¥–Ω—ã–π –æ–±—ä–µ–º</span>
                <span class="stat-value" id="total-scope">0 ‚ÇΩ</span>
            </div>
            <div class="stat-card">
                <span class="stat-label">–í—ã–ø–æ–ª–Ω–µ–Ω–æ –ø—Ä–æ–µ–∫—Ç–æ–≤</span>
                <span class="stat-value" id="done-count">0</span>
            </div>
        </div>
        <div class="chart-container mt-4">
            <canvas id="lineChart"></canvas>
        </div>
    </div>

</div>

<div id="add-project-modal" class="modal-overlay" onclick="closeModalIfOutside(event)">
    <div class="modal-content">
        <h2>–î–æ–±–∞–≤–∏—Ç—å/–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç</h2>
        <form id="project-form">
            <input type="hidden" id="modal-status" value="active">
            <input type="hidden" id="modal-index" value="-1">
            
            <div class="form-group">
                <label for="modal-n">–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞</label>
                <input type="text" id="modal-n" required>
            </div>
            <div class="form-group">
                <label for="modal-c">–ö–ª–∏–µ–Ω—Ç</label>
                <input type="text" id="modal-c" required>
            </div>
            
            <div class="flex gap-3">
                <div class="form-group" style="flex:1;">
                    <label for="modal-p">–°—É–º–º–∞ (‚ÇΩ)</label>
                    <input type="text" id="modal-p" inputmode="numeric" oninput="formatNumberInput(this)">
                </div>
                <div class="form-group" style="flex:1;">
                    <label for="modal-link">–°—Å—ã–ª–∫–∞ (Trello, Figma –∏ —Ç.–¥.)</label>
                    <input type="text" id="modal-link">
                </div>
            </div>

            <div class="flex gap-3">
                <div class="form-group" style="flex:1;">
                    <label for="modal-start">–î–∞—Ç–∞ —Å—Ç–∞—Ä—Ç–∞</label>
                    <input type="text" id="modal-start" placeholder="–î–î.–ú–ú.–ì–ì–ì–ì">
                </div>
                <div class="form-group" style="flex:1;">
                    <label for="modal-dl">–î–µ–¥–ª–∞–π–Ω</label>
                    <input type="text" id="modal-dl" placeholder="–î–î.–ú–ú.–ì–ì–ì–ì">
                </div>
            </div>

            <div class="flex gap-3">
                <div class="form-group" style="flex:1;">
                    <label for="modal-paid">–û–ø–ª–∞—á–µ–Ω–æ (%)</label>
                    <input type="number" id="modal-paid" min="0" max="100" value="0">
                </div>
                <div class="form-group" style="flex:1;">
                    <label for="modal-taxPrc">–ù–∞–ª–æ–≥ (%)</label>
                    <select id="modal-taxPrc"></select>
                </div>
            </div>
            
            <div class="form-group">
                <label for="modal-contractor">–†–∞—Å—Ö–æ–¥—ã –Ω–∞ –ø–æ–¥—Ä—è–¥—á–∏–∫–∞</label>
                <input type="text" id="modal-contractor" placeholder="–°—É–º–º–∞ –∏–ª–∏ –ø—Ä–æ—Ü–µ–Ω—Ç" inputmode="numeric">
            </div>

            <div class="flex justify-between mt-4">
                <div class="flex gap-3">
                    <input type="checkbox" id="modal-contr-mode">
                    <label for="modal-contr-mode">–ü—Ä–æ—Ü–µ–Ω—Ç –æ—Ç —Å—É–º–º—ã</label>
                </div>
            </div>

            <div class="modal-actions">
                <button type="button" class="cancel-btn" onclick="closeModal('add-project-modal')">–û—Ç–º–µ–Ω–∞</button>
                <button type="submit" class="primary-btn" id="modal-save-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </form>
    </div>
</div>

<div id="delete-confirm-modal" class="modal-overlay" onclick="closeModalIfOutside(event)">
    <div class="modal-content">
        <h2>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è</h2>
        <p id="delete-message">–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã –Ω–∞–≤—Å–µ–≥–¥–∞? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ.</p>
        <div class="modal-actions">
            <button type="button" class="cancel-btn" onclick="closeModal('delete-confirm-modal')">–û—Ç–º–µ–Ω–∞</button>
            <button type="button" class="primary-btn" style="background-color: var(--red);" id="confirm-delete-btn" onclick="del()">–£–¥–∞–ª–∏—Ç—å</button>
        </div>
    </div>
</div>

<div id="clear-data-modal" class="modal-overlay" onclick="closeModalIfOutside(event)">
    <div class="modal-content">
        <h2>–û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö</h2>
        <p>–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ DesignFlow? –í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã –Ω–∞–≤—Å–µ–≥–¥–∞.</p>
        <div class="modal-actions">
            <button type="button" class="cancel-btn" onclick="closeModal('clear-data-modal')">–û—Ç–º–µ–Ω–∞</button>
            <button type="button" class="primary-btn" style="background-color: var(--red);" onclick="clearData()">–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ</button>
        </div>
    </div>
</div>


<script src="script.js"></script>

</body>
</html>
