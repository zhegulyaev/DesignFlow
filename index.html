<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>DesignFlow — Трекер проектов</title>

<link rel="icon" type="image/svg+xml"
      href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Crect width='24' height='24' rx='6' ry='6' fill='%230d1117'/%3E%3Cpath d='M11 2 L5 14 H10 L9 22 L19 8 H13 L14 2 Z' fill='%23facc15'/%3E%3C/svg%3E">

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ru.js"></script>

<link rel="stylesheet" href="style.css">

</head>
<body>

<div id="app">
  <div class="c w-lg">
    <div class="header">
      <div class="nav">
        <div class="tab" data-tab="active" onclick="switchTab(this)">В работе</div>
        <div class="tab" data-tab="waiting" onclick="switchTab(this)">Ожидает</div>
        <div class="tab" data-tab="potential" onclick="switchTab(this)">Потенциал</div>
        <div class="tab" data-tab="paused" onclick="switchTab(this)">На паузе</div>
        <div class="tab" data-tab="archive" onclick="switchTab(this)">Выполнено</div>
        <div class="tab menu-btn" onclick="toggleMenu()">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
        </div>
      </div>
      <div class="menu">
        <div class="m-item" onclick="exp()">Экспорт JSON</div>
        <div class="m-item" onclick="expCSV()">Экспорт CSV</div>
        <div class="m-item" onclick="imp()">Импорт JSON</div>
        <div class="m-item" onclick="clearAll()">Очистить все</div>
        <div class="m-item" onclick="toggleInfo()">О проекте</div>
        <div class="m-item" onclick="toggleDonate()">Поддержать</div>
        <div class="m-item" onclick="toggleSettings()">Настройки</div>
      </div>
    </div>
  </div>

  <div class="c w-lg info-container">
    <div class="card s-card stats">
      <canvas id="chart"></canvas>
      <div class="stats-text">
        <div class="s-item">
          <div class="s-v" id="all-sum">0</div>
          <div class="s-l">Общая сумма</div>
        </div>
        <div class="s-item">
          <div class="s-v" id="all-net">0</div>
          <div class="s-l">Чистыми</div>
        </div>
        <div class="s-item">
          <div class="s-v" id="all-paid">0</div>
          <div class="s-l">Оплачено</div>
        </div>
        <div class="s-item">
          <div class="s-v" id="all-tax">0</div>
          <div class="s-l">Налог</div>
        </div>
        <div class="s-item">
          <div class="s-v" id="all-contractor">0</div>
          <div class="s-l">Расходы</div>
        </div>
      </div>
    </div>

    <div class="card s-card info">
      <div class="s-title">О проекте</div>
      <div class="s-text">
        <p>DesignFlow — простой трекер проектов для фрилансеров, работающий локально в вашем браузере. Данные хранятся в LocalStorage.</p>
        <p>
          <a class="link" href="https://github.com/DesignFlowDev/DesignFlow" target="_blank">GitHub</a>
          <a class="link" href="https://t.me/DesignFlowDev" target="_blank">Telegram</a>
        </p>
      </div>
    </div>

    <div class="card s-card settings">
      <div class="s-title">Настройки</div>
      <div class="s-item">
        <label for="currency">Валюта</label>
        <input id="currency" type="text" value="₽" oninput="saveSettings()">
      </div>
      <div class="s-item">
        <label for="tax">Налог (%)</label>
        <input id="tax" type="number" min="0" max="100" value="0" oninput="saveSettings()">
      </div>
      <div class="s-item">
        <label for="percentPaid">Процент оплачено по умолчанию</label>
        <input id="percentPaid" type="number" min="0" max="100" value="0" oninput="saveSettings()">
      </div>
      <div class="s-item">
        <label for="today">Текущая дата (для экспорта)</label>
        <input id="today" type="date">
      </div>
      <div class="s-item">
        <label for="taxBase">База для налога (по умолчанию - Сумма)</label>
        <select id="taxBase" onchange="saveSettings()">
          <option value="p">Сумма</option>
          <option value="net">Чистыми</option>
        </select>
      </div>
    </div>

    <div class="card s-card donate">
      <div class="s-title">Поддержать</div>
      <div class="s-text">
        <p>
          Если DesignFlow оказался вам полезен, вы можете поддержать проект.
          <a class="link" href="https://boosty.to/designflow" target="_blank">Boosty</a>
          <a class="link" href="https://www.donationalerts.com/r/designflow" target="_blank">DonationAlerts</a>
        </p>
        <p>Спасибо!</p>
      </div>
    </div>
  </div>

  <div class="c w-lg">
    <div class="tab-content" id="active">
      <div class="list"></div>
      <div class="add-btn" onclick="openModal()">Добавить проект</div>
    </div>
    <div class="tab-content hidden" id="waiting">
      <div class="list"></div>
      <div class="add-btn" onclick="openModal()">Добавить проект</div>
    </div>
    <div class="tab-content hidden" id="potential">
      <div class="list"></div>
      <div class="add-btn" onclick="openModal()">Добавить проект</div>
    </div>
    <div class="tab-content hidden" id="paused">
      <div class="list"></div>
      <div class="add-btn" onclick="openModal()">Добавить проект</div>
    </div>
    <div class="tab-content hidden" id="archive">
      <div class="list"></div>
      <div class="add-btn" onclick="openModal()">Добавить проект</div>
    </div>
  </div>

  <div class="modal-bg hidden" onclick="closeModal()">
    <div class="modal" onclick="event.stopPropagation()">
      <div class="m-title">Добавить проект</div>
      <input type="hidden" id="item-id">
      <div class="m-item">
        <label for="client">Клиент (Название компании)</label>
        <input type="text" id="client">
      </div>
      <div class="m-item">
        <label for="name">Проект (Краткое описание)</label>
        <input type="text" id="name">
      </div>
      <div class="m-item">
        <label for="price">Сумма</label>
        <input type="number" id="price" min="0" value="0">
      </div>
      <div class="m-item">
        <label for="taxPrc">Налог (%)</label>
        <input type="number" id="taxPrc" min="0" max="100">
      </div>
      <div class="m-item">
        <label for="contractorAmount">Расходы</label>
        <input type="number" id="contractorAmount" min="0" value="0">
      </div>
      <div class="m-item">
        <label for="paid">Оплачено (%)</label>
        <input type="number" id="paid" min="0" max="100">
      </div>
      <div class="m-item">
        <label for="start">Дата Старта</label>
        <input type="text" id="start">
      </div>
      <div class="m-item">
        <label for="dl">Дедлайн/Сдачи</label>
        <input type="text" id="dl">
      </div>
      <div class="m-item">
        <label for="link">Ссылка</label>
        <input type="text" id="link">
      </div>
      <div class="m-item">
        <label for="status">Статус</label>
        <select id="status">
          <option value="active">В работе</option>
          <option value="waiting">Ожидает</option>
          <option value="potential">Потенциал</option>
          <option value="paused">На паузе</option>
          <option value="archive">Выполнено</option>
        </select>
      </div>
      <div class="m-item">
        <button class="btn" onclick="addItem()">Сохранить</button>
        <button class="btn btn-del" onclick="deleteItem()">Удалить</button>
      </div>
    </div>
  </div>

</div>

<script src="script.js"></script>

</body>
</html>
